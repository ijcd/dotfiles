#!/bin/sh
# term-escape - Convert characters to hex escape sequences
#
# Usage: term-escape <string>
#
# Converts each byte of the input to \xHH format.
# Useful for escaping UTF-8 characters or binary data.
#
# Examples:
#   term-escape Ã±         # \xC3\xB1
#   term-escape hello     # \x68\x65\x6C\x6C\x6F
#   term-escape ðŸ˜€        # \xF0\x9F\x98\x80

if [ -z "$1" ]; then
  echo "Usage: term-escape <string>" >&2
  exit 1
fi

printf "\\\x%s" $(printf "$*" | xxd -p -c1 -u)

# Print newline unless piping to another program
[ -t 1 ] && echo
